function normalizeDate(str) {
  const parts = str.split(".");
  return parts.map(p => parseInt(p)).join("."); // wandelt z. B. 02.05.2025 zu 2.5.2025
}

function render(einträge) {
  const carousel = document.getElementById("carousel");
  const todayFormatted = normalizeDate(formatDate(new Date()));

  const indexHeute = einträge.findIndex(e => normalizeDate(e.datum) === todayFormatted);

  if (indexHeute === -1) {
    carousel.innerHTML = "<p style='color:#888'>Kein Datum für heute gefunden.</p>";
    return;
  }

  const center = 2;
  const startIndex = Math.max(0, indexHeute - center);
  const visible = einträge.slice(startIndex, startIndex + 5);

  visible.forEach((eintrag) => {
    const isToday = normalizeDate(eintrag.datum) === todayFormatted;
    const isFaded = !isToday;
    const card = createCard(eintrag.datum, eintrag.status, isToday, isFaded);
    carousel.appendChild(card);
  });
}
